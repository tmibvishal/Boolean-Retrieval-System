# Report
See file `2018CS50426.pdf` for full report and readings

# Running Instructions
**Building**
```
bash build.sh
```

**Indexing**
```
bash invidx.sh [coll-path] [indexfile] [stopwordfile] {compression_method} [xml-tags-info]
```

- **coll-path:** speciﬁes the directory containing the ﬁles containing documents of the collection
- **indexfile:** is the name of the index ﬁles that will be generated by the program
- **stopwordfile:** is a ﬁle that contains the stopwords
- **compression_method:** 0|1|2|3|4
- **xml-tags-info:** Document ID tag in first line and then indexable tags in subsequent lines.

2 files `indexfile.dict` and `indexfile.idx` are generated.

**Searching**
```
bash boolsearch.sh [queryfile] [resultfile] [indexfile] [dictfile]
```
- **queryfile:** a file containing keyword queries, with each line corresponding to a query
- **resultfile:** the output file named resultfile
- **indexfile:** the index file generated while indexing
- **dictfile:** the dictionary file generated while indexing

**Example run**
```bash
bash build.sh
bash invidx.sh data/small_data/coll indexfile data/small_data/stopwordfile.txt 0 data/small_data/xml_tags_info.txt
bash boolsearch.sh data/small_data/queries.txt data/small_data/result/result.txt indexfile.idx indexfile.dict
```

# Snappy Library
If you are not using Ubuntu there can be problems while running the snappy library since the compiled version included with the program is compiled on Ubunut using gcc 7.
```
cd lib
git clone https://github.com/google/snappy.git
cd snappy
git submodule update --init
mkdir build
cd build && cmake ../ && make
cd ../../
cp snappy/build/libsnappy.a libsnappy.a
cp snappy/snappy.h ../include/snappy.h
cp snappy/build/snappy-stubs-public.h ../include/snappy-stubs-public.h
cd ../
```

# Directory Structure

- `bin/`
    - Contains all the executables after building
- `include/`
    - Contains all the included source code from external libraries used. Currently, I have used rapidxml, snappy and porter stemmer
- `lib/`
    - Contains libsnappy.a (For ubuntu). If you are on a different OS you will need to compile it again. See README.md for all the instructions.
- `obj/`
    - Contains all .o files
- `src/`
    - Contains all the source code
    - `config.h`: Contains all the configurations like safe size, dictionary extra size I can keep in memory and delimiters etc.
- `temp/`
    - Contains temporary files while the binaries are running. All the files inside this directory are deleted automatically after the running is done.
